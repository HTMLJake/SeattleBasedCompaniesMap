(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(19)},15:function(e,t,n){},17:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a,o=n(0),i=n.n(o),s=n(9),r=n.n(s),c=(n(15),n(2)),l=n(3),d=n(5),u=n(4),m=n(6),p=n(1),h=(n(17),function(e){function t(){return Object(c.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("nav",{id:"sidebar",className:"sidebar"+this.props.sidebar},i.a.createElement("header",{className:"sidebar-header"},i.a.createElement("h2",null,"Locations"),i.a.createElement("p",null,"Filter"),i.a.createElement("select",{value:this.props.filter,onChange:this.props.handleChange,className:"select","aria-label":"Filter selection dropdown",onFocus:this.props.showMenu},i.a.createElement("option",{value:"all"},"All"),i.a.createElement("option",{value:"google"},"Google"),i.a.createElement("option",{value:"microsoft"},"Microsoft"),i.a.createElement("option",{value:"tech"},"Tech"),i.a.createElement("option",{value:"shopping"},"Shopping"),i.a.createElement("option",{value:"food"},"Food"),i.a.createElement("option",{value:"other"},"Other"))),i.a.createElement("menu",{id:"list",className:"list",ref:"companysList"},this.props.sidebarList.map(function(t,n){return i.a.createElement("li",{onFocus:e.props.showMenu,tabIndex:"0",role:"button",key:n,className:"list-item",onClick:e.props.SidebarSelection},t.name)})))}}]),t}(o.Component)),f=window.google,g=window.document.getElementsByTagName("script"),v=function(e){function t(){var e,n;Object(c.a)(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={locations:[],markers:[],map:{},filter:"all",sidebar:" ",prevSelection:"",sidebarList:[]},n.initMap=function(){var e=new f.maps.LatLngBounds;n.setState({map:new f.maps.Map(document.getElementById("map"),{center:{lat:47.649297,lng:-122.351629},zoom:11})}),fetch("./locations.json").then(function(e){return e.json()}).then(function(t){n.setState({locations:t});for(var a=0;a<n.state.locations.length;a++){var o=n.state.locations[a],i=new f.maps.Marker({position:o.pos,title:o.name,map:n.state.map,animation:f.maps.Animation.DROP});e.extend(i.position),n.pushMarker(i,a)}}).then(function(){n.state.map.fitBounds(e),n.fillSidebar(n.state.filter)})},n.pushMarker=function(e,t){var o=n.state.markers;o.push(e),n.setState({markers:o});var i=Object(p.a)(Object(p.a)(n));e.addListener("click",function(){a.anchor&&a.anchor.setAnimation(f.maps.Animation.NONE),i.showInfoWindow(e,t),e.setAnimation(f.maps.Animation.BOUNCE)})},n.showInfoWindow=function(e,t){var o=n.state.map;a.marker!==e&&(a.marker=e,n.FetchAPI(n.state.locations[t]),a.open(o,e),a.addListener("closeclick",function(){e.setAnimation(f.maps.Animation.NONE),a.setMarker=null}))},n.toggleSidebar=function(){" "===n.state.sidebar?n.setState({sidebar:" open"}):n.setState({sidebar:" "})},n.showSidebar=function(){" "===n.state.sidebar&&n.setState({sidebar:" open"})},n.hideSidebar=function(){" open"===n.state.sidebar&&n.setState({sidebar:" "})},n.handleChange=function(e){n.setState({filter:e.target.value}),n.fillSidebar(e.target.value)},n.SidebarSelection=function(e){var t,o=n.state.prevSelection;t=e.currentTarget?e.currentTarget:e,o?o===t?(t.classList.toggle("selected"),o=void 0,a.setMarker=null,a.close(),console.log(t.parentNode),n.ShowSelectedListings(t.parentNode.childNodes)):(o.classList.toggle("selected"),t.classList.toggle("selected"),o=t,n.ShowSelectedListings(t)):(t.classList.toggle("selected"),o=t,n.ShowSelectedListings(t)),n.setState({prevSelection:o})},n.getMarkerIndex=function(e){for(var t=0,a=0;a<n.state.markers.length;a++){var o=n.state.locations[a];e.textContent&&e.textContent===o.name?t=a:e.name===o.name&&(t=a)}return t},n.ShowSelectedListings=function(e){for(var t=n.state.map,a=new f.maps.LatLngBounds,o=0;o<n.state.markers.length;o++)n.state.markers[o].setMap(null),n.state.markers[o].setAnimation(f.maps.Animation.NONE);if(e.length>0)for(var i=0;i<e.length;i++){var s=n.getMarkerIndex(e[i]);n.state.markers[s].setMap(t),a.extend(n.state.markers[s].position),t.fitBounds(a)}else{var r=n.getMarkerIndex(e),c=n.state.markers[r];c.setAnimation(f.maps.Animation.BOUNCE),c.setMap(t),a.extend(c.position),n.showInfoWindow(c,r),t.fitBounds(a),t.setZoom(12)}},n.fillSidebar=function(e){var t;t="all"===e?n.state.locations:n.state.locations.filter(function(t){return t.tags.includes(e)}),n.ShowSelectedListings(t),n.setState({sidebarList:t})},n.FetchAPI=function(e){a.setContent("<h2>".concat(e.name,"</h2>\n      <p>\n      ").concat(e.tags.map(function(e){return"<span> ".concat(e,"</span>")}),"\n      </p>\n      ")),fetch("https://api.foursquare.com/v2/venues/search?ll=".concat(e.pos.lat.toFixed(2),",").concat(n.state.locations[0].pos.lng.toFixed(2),"&client_id=XFCQCFTGSRV30JUYFS5OZYMXCVJ3DS1K20QR3FDC1K5YFZDY%20&client_secret=%203CFG54PJ4XKFL1DC5CLCKYMO5EK131OPTQSIMGPER53CZ2TO&v=20180423&query=").concat(e.name)).then(function(t){n.apiFetchImgs(t.json(),e)}).catch(function(t){a.setContent("<h2>".concat(e.name,"</h2>\n          <p>Couldn't retrieve image</p>\n          <p>\n            ").concat(e.tags.map(function(e){return"<span>".concat(e,"</span>")}),"\n          </p>\n          "))})},n.apiFetchImgs=function(e,t){e.then(function(e){fetch("https://api.foursquare.com/v2/venues/".concat(e.response.venues[0].id,"/photos?client_id=XFCQCFTGSRV30JUYFS5OZYMXCVJ3DS1K20QR3FDC1K5YFZDY%20&client_secret=%203CFG54PJ4XKFL1DC5CLCKYMO5EK131OPTQSIMGPER53CZ2TO&v=20180423")).then(function(e){return e.json()}).then(function(e){var n=e.response.photos.items[0];a.setContent("<h2>".concat(t.name,"</h2>\n          <img src=").concat(n.prefix+125+n.suffix," alt=").concat(t.name,"/>\n          <p>\n            ").concat(t.tags.map(function(e){return"<span>".concat(e,"</span>")}),"\n          </p>\n          "))})})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(window.document.addEventListener("keydown",function(t){"Enter"===t.key&&(console.log(t.key),document.activeElement.outerHTML.includes("li")?e.SidebarSelection(document.activeElement):document.activeElement.outerHTML.includes("hamburger")&&e.toggleSidebar())}),f)a=new window.google.maps.InfoWindow,this.initMap();else{for(var t,n=0;n<g.length;n++)g[n].src.includes("googleapi")&&(t=g[n]);t&&(t.addEventListener("load",function(t){f=window.google,a=new window.google.maps.InfoWindow,e.initMap()}),t.addEventListener("error",function(e){console.log(e)}))}}},{key:"render",value:function(){return i.a.createElement("section",null,i.a.createElement("div",{tabIndex:"1",id:"hamburger",className:"hamburger"+this.state.sidebar,onClick:this.toggleSidebar,onSelect:this.toggleSidebar},i.a.createElement("div",{tabIndex:"-1",className:"bar"}),i.a.createElement("div",{tabIndex:"-1",className:"bar"}),i.a.createElement("div",{tabIndex:"-1",className:"bar"})),i.a.createElement(h,{SidebarSelection:this.SidebarSelection,handleChange:this.handleChange,sidebarList:this.state.sidebarList,sidebar:this.state.sidebar,fiter:this.state.filter,showMenu:this.showSidebar}),i.a.createElement("div",{className:"main",onClick:this.hideSidebar,onFocus:this.hideSidebar},i.a.createElement("div",{tabIndex:"1",className:"title"},i.a.createElement("h1",{className:"header-title"},"Seattle Based Companies")),i.a.createElement("div",{tabIndex:"-1",id:"map",className:"map"},"Google Maps not loaded")))}}]),t}(o.Component),b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(i.a.createElement(v,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/SeattleBasedCompaniesMap",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/SeattleBasedCompaniesMap","/service-worker.js");b?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):w(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):w(e)})}}()}},[[10,2,1]]]);
//# sourceMappingURL=main.69d434c7.chunk.js.map